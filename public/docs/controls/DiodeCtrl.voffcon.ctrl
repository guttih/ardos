{"name":"DiodeCtrl","description":"Use this control to display the value of a pin. This control draws a image of an diode on the screen and within that diode there is a number representing the pin value.\n","code":"\"use strict\";\r\n/*\r\n\tUse this control to display the value of a pin.\r\n\tThis control draws a image of an diode on the screen and within\r\n\tthat diode there is a number representing the pin value.\r\n*/\r\nclass DiodeCtrl extends PinControl {\r\n\tconstructor(left, top, pinObject, highestValue, baseBackground){\r\n\t    \r\n\t\tvar pinNumber = pinObject.getNumber();\r\n\t\tvar pinValue  = pinObject.getValue();\r\n\t\tif (highestValue === undefined){\r\n\t\t\thighestValue = pinObject.getHigestValue();\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\r\n\t\tsuper('diode-ctrl', left, top, pinNumber, pinValue, highestValue, pinObject.getDeviceID());\r\n\r\n        if (baseBackground !== undefined ){\r\n\t\t   \r\n\t\t    this.setBackground(baseBackground);\r\n\t\t} else {\r\n\t\t    this.setBackground('red');\r\n\t\t}\r\n\r\n\t\tvar ratio = highestValue / pinObject.getHigestValue();\r\n\t\tthis.setPinValueRatio(ratio);\r\n\t\tthis.setValue(super.getPinValue());\r\n\t\tpinObject.addControl(this);\r\n\t}\r\n    setBackground(newBackground){\r\n        this.diodeBackground = newBackground;\r\n    }\r\n    getBackground(){\r\n        return this.diodeBackground;\r\n    }\r\n\tgetLight(){     return $('#' + super.getId());\r\n\t                //return $('#' + super.getId() + ' .light');\r\n\t            }\r\n\tgetLightTop(){ return $('#' + super.getId() + '> .light-top');}\r\n\tgetLighBottom(){ return $('#' + super.getId() + '> .light-bottom');}\r\n\tgetText(){ return $('#' + super.getId() + '> .pinvalue');}\r\n\t\r\n\tscale(value){\r\n\t\tsuper.scale(this.getLight(), value);\r\n\t\t//super.scale($('#' + super.getId()), value);\r\n\t}\r\n\trotate(degrees){\r\n\t\tsuper.rotate(this.getLight(), degrees);\r\n\t}\r\n\t//if bActivate == false then the pin gecomes grayed show that it is inactivated\r\n\tactive(bActivate){\r\n\t\t\r\n\t\tif (bActivate === true){\r\n\t\t\tthis.setValue(super.getPinValue()/this.pinValueRatio);//this will show the state but todo: we could loose precition\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t//bActivate is false so let's gray everything\r\n\t\tvar background = '#cccccc';\r\n\r\n\t\tthis.getLightTop().css({background:background});\r\n\t\tthis.getLighBottom().css({background:background});\r\n\t}\r\n\t\r\n\r\n\tsetValue(value){\r\n\t\t\r\n\t\tsuper.setPinValue(value*this.pinValueRatio);\r\n\t\tvar background;\r\n\t\t//background = 'red';\r\n\t\tbackground = this.getBackground();\r\n\t\tvar opacity = super.getPinValue() /super.getHigestValue();\r\n\t\tif (opacity < 0.05){ opacity = 0.05;\t}\r\n\t\t\r\n\t\tthis.getLightTop().css({background: background, opacity:opacity});\r\n\t\tthis.getLighBottom().css({background: background, opacity:opacity});\r\n\t\tthis.getText().text(Math.round((super.getPinValue()*100)/100));\r\n\t}\r\n\t\tsetPinValueRatio(ratio){\r\n\t\tthis.pinValueRatio = ratio;\r\n\t}\r\n\t\r\n\r\n}//class\r\n\r\n","helpurl":"/controls/help/ctrl/DiodeCtrl","template":"<div  id=\"diode-ctrl\" class=\"dodectrl light\" style=\"position:absolute;display: inline-block;width:25px;height:33px\">\r\n    <div class=\"light-top\" style=\"opacity: 1;position: relative;left: 2px;width: 20px;height: 31px;background-color: red;border-top-left-radius: 45%;border-top-right-radius: 45%;border-width: 2px;\"></div>\r\n    <div class=\"light-bottom\" style=\"opacity: 1;position: relative;width: 24px;height: 5px;left: 0px;top: -4px;background-color: red;border-top-left-radius: 2px;border-top-right-radius: 2px;border-bottom-left-radius: 3px;border-bottom-right-radius: 3px;\"></div>\r\n    <p class=\"pinvalue\" \r\n        style=\"position: relative;\r\n                top: -41px;\r\n                font-size: 12px;\r\n                -webkit-transform: rotate(270deg);\r\n                -moz-transform: rotate(270deg);\r\n                -ms-transform: rotate(270deg);\r\n                -o-transform: rotate(270deg);\r\n                transform: rotate(270deg);\r\n                color: blue;\r\n                display: block;\r\n                -webkit-margin-before: 1em;\r\n                -webkit-margin-after: 1em;\r\n                -webkit-margin-start: 0px;\r\n                -webkit-margin-end: 0px;\">\r\n        x1023\r\n    </p>\r\n</div>"}